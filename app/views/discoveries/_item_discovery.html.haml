- discovery = discovery
- genres = genres

.margin-s{style: "padding: 0.5em 1em; background: #dcf7f0; border-left: solid 10px #42f4c8;"}
  .flex-container.align-center.js-container-text
    %div
      .text.normal
        = simple_format(discovery.content)
      .text.small.margin-s-b
        genres:
        - discovery.genres.each do |g|
          %span.circle{style: "background-color: red;"}= g.name
      .text.xsmall
        = discovery.created_at.strftime('%m/%d %H:%M')
    .flex-expanded
    %div
      .btn.text.normal.js-edit
        Edit

  .js-container-form.hide
    = form_for discovery do |f|
      .flex-container.align-center
        %div
          .text.large
            = f.text_area :content, class: "form", size: "100x6", placeholder: "What's your new discovery!?"

          .text.small.margin-m.flex-container
            genres:
            - genres.each do |g|
              .margin-s-r
                = f.check_box :genre_ids, { multiple: true, include_hidden: false }, g.id
                = g.name
            = link_to "add?", new_genre_path
        .flex-expanded
        %div
          = f.submit "Submit", class: "btn"


:javascript
  $(".js-edit").on("click", function() {
    $(".js-container-text").addClass("hide");
    $(".js-container-form").removeClass("hide");
  });

